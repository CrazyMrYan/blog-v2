---
title: "ç”±äºXXç«Ÿç„¶å¼€å¯äº†é˜²ç›—é“¾ï¼Œæˆ‘è¿å¤œå†™ä¸ªçˆ¬è™«ğŸ•·ï¸å¯¼å‡ºåšå®¢æ‰€æœ‰å†…å®¹"
date: 2023-07-29T00:40:13.000Z
tags: 
  - çˆ¬è™«
  - Node.js
  - æ˜é‡‘ç¤¾åŒº
head:
  - - meta
    - name: headline
      content: ç”±äºXXç«Ÿç„¶å¼€å¯äº†é˜²ç›—é“¾ï¼Œæˆ‘è¿å¤œå†™ä¸ªçˆ¬è™«ğŸ•·ï¸å¯¼å‡ºåšå®¢æ‰€æœ‰å†…å®¹
  - - meta
    - name: description
      content: å™¢ï¼ŒåŸæ¥æ˜¯æˆ‘ä¹‹å‰ï¼ŒæŠŠæ˜é‡‘å½“å›¾åºŠåœ¨ä½¿ï¼Œç‹ ç‹ å¾—è–…æ˜é‡‘ä¸€ä¸¤å¹´çš„ç¾Šæ¯›ã€‚ç»“æœä¸çŸ¥é“å•¥æ—¶å€™çªç„¶å¼€å¯äº†é˜²ç›—é“¾ã€‚å¯¼è‡´äº†å‡ºç°è¿™ä¸ªP1çº§äº‹æ•…ï¼ˆç ´ç«™è™½ç„¶æ²¡äººè®¿é—®ï¼‰ã€‚ å› ä¸ºæˆ‘çš„æ–‡ç« éƒ½æ˜¯é å›¾ç‰‡å é¢ç§¯çš„ï¼Œè¿™ä¹ˆå¤šå›¾ç‰‡ä¸€ä¸ªä¸ªæ›¿
  - - meta
    - name: keywords
      content: çˆ¬è™«,Node.js,æ˜é‡‘ç¤¾åŒº
  - - meta
    - name: datePublished
      content: 2023-07-29T00:40:13.000Z
---

å‰è¨€
--

> äº‹æƒ…æ˜¯è¿™æ ·çš„ï¼Œåœ¨å†™å®Œä¸Šä¸€ç¯‡æ–‡ç« åï¼Œå°† `markdown`æ–‡ä»¶éƒ¨ç½²åˆ°äº†è‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼Œç„¶åå‘ç°è‡ªå·±åšå®¢çš„å›¾ç‰‡å…¨éƒ¨æ²¡æœ‰äº†ï¼ŒF12ä¸€çœ‹ï¼Œæ‰å‘ç°éƒ½å˜æˆäº† 403ã€‚è¿™æ˜¯ä¸ºå•¥å‘¢ï¼Ÿ

å™¢ï¼ŒåŸæ¥æ˜¯æˆ‘ä¹‹å‰ï¼ŒæŠŠæ˜é‡‘å½“å›¾åºŠåœ¨ä½¿ï¼Œç‹ ç‹ å¾—è–…æ˜é‡‘ä¸€ä¸¤å¹´çš„ç¾Šæ¯›ã€‚ç»“æœä¸çŸ¥é“å•¥æ—¶å€™çªç„¶å¼€å¯äº†é˜²ç›—é“¾ã€‚å¯¼è‡´äº†å‡ºç°è¿™ä¸ª`P1`çº§äº‹æ•…ï¼ˆç ´ç«™è™½ç„¶æ²¡äººè®¿é—®ï¼‰ã€‚

å› ä¸ºæˆ‘çš„æ–‡ç« éƒ½æ˜¯é å›¾ç‰‡å é¢ç§¯çš„ï¼Œè¿™ä¹ˆå¤šå›¾ç‰‡ä¸€ä¸ªä¸ªæ›¿æ¢å¤ªéº»çƒ¦äº†ï¼Œæ‰€ä»¥æˆ‘æ¥ä¸‹æ¥æ‰“ç®—å°†æ˜é‡‘ä¸Šçš„æ–‡ç« å…¨éƒ¨çˆ¬ä¸‹æ¥åŒ…æ‹¬å›¾ç‰‡ï¼Œé‡æ–°éƒ¨ç½²åˆ°è‡ªå·±çš„åšå®¢ï¼ˆvitepressï¼‰ä¸Šå»ã€‚

![](./images/405bd8f9f99b4a7f8c2604ba7c41b488~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.webp)

ä»€ä¹ˆæ˜¯é˜²ç›—é“¾
------

é¦–å…ˆé™æ€èµ„æºå°±æ˜¯ä¸€ä¸ªURIï¼Œé˜²ç›—é“¾å°±æ˜¯ä¸ºäº†é˜²æ­¢åˆ«äººæ‹¿ä½ çš„é“¾æ¥ï¼Œåˆ°å¤„å¼•ç”¨ã€‚æ¯”å¦‚æˆ‘çš„ä¸ªäººåšå®¢ï¼Œåˆæˆ–è€…å…¶ä»–å¹³å°çš„æ–‡ç« éƒ½åœ¨ç”¨æ˜é‡‘çš„å›¾ç‰‡ï¼Œé‚£ä¹ˆæ˜é‡‘çš„æµé‡å°±ä¼šæš´å¢ã€‚

æ‰€ä»¥ä¸€èˆ¬å¼€å¯é˜²ç›—é“¾æ˜¯æœ‰å¿…è¦çš„ï¼Œå½“ç„¶æˆ‘é‚£ä¸ªå°ç ´ç«™ï¼Œæœˆ UV æ•°é‡ï¼Œä¼°æ‘¸ç€ä¹Ÿå°± 5ä¸ªå·¦å³ã€‚é˜²äººä¹‹å¿ƒä¸å¯æ— ï¼Œæˆ‘è¿˜æ˜¯å…ˆå¼€å¯ä¸ºæ•¬äº†ã€‚

æœ¬æ¬¡å…ˆä¸å¸¦æ¥é˜²ç›—é“¾çš„å®ç°ï¼Œåç»­æœ‰æœºä¼šè¡¥å……å§ã€‚

å®è·µNodejsçˆ¬è™«
----------

åœ¨å‰é¢è¯´åˆ°äº†ï¼Œæˆ‘éœ€è¦å°†æ–‡ç« è¿˜æœ‰å›¾ç‰‡éƒ½ä¸‹è½½ä¸‹æ¥ï¼Œæ–‡ç« æˆ‘è½¬ä¸º `Markdown` å­˜å‚¨ã€‚å›¾ç‰‡ä¿æŒæ–‡ä»¶ç±»å‹å°±è¡Œï¼Œç›´æ¥ä¸‹è½½åˆ°ä¸€ä¸ª images ç›®å½•å†…ã€‚

éœ€è¦ç”¨åˆ°çš„æ’ä»¶

*   cheerio ç±»ä¼¼ JQuery ä¸€æ ·çš„DOMæ“ä½œ(golang æœ‰ä¸ª goquery)
*   turndown å°† HTML è½¬åŒ–æˆ Markdown

å¤§è‡´æ€è·¯å¦‚ä¸‹

![](./images/ab4417e81ecb4bbcaae7d1641edacff8~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.webp)

### å®ç°ä¸€ä¸ªç®€æ˜“çˆ¬è™«

ç®€å•å®ç°ä¸€ä¸ªé€šè¿‡URLè·å–HTMLçš„å°åŠŸèƒ½ï¼Œå…ˆè¯·æ±‚æ‹¿åˆ°å†…å®¹ï¼Œç„¶åé€šè¿‡`cheerio`æ’ä»¶é€‰ä¸­åˆ°æ˜é‡‘å­˜æ”¾æ–‡ç« çš„æ ¹å…ƒç´ ï¼Œæœ€åé€šè¿‡ `turndown` æ’ä»¶è½¬åŒ–æˆ Markdownã€‚

![](./images/648b696e4596413fa6eb3b9dcfecbf35~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.webp)

```js
const request = require('request');
const cheerio = require('cheerio');
const fs = require('fs');
const TurndownService = require('turndown');
const turndownService = new TurndownService();
// æ˜é‡‘æ–‡ç« é“¾æ¥
const url = 'https://juejin.cn/post/7221567098466615353';

request(url, (error, response, body) => {
  if (!error && response.statusCode === 200) {
    // è§£æDOMå…ƒç´ 
    const $ = cheerio.load(body);
    // è·å–æ–‡ç« å†…å®¹
    const content = $('.markdown-body').html();
    // è½¬æ¢ä¸ºmarkdown
    const markdown = turndownService.turndown(content);
    // å†™å…¥æ–‡ä»¶
    fs.writeFileSync('./docs/ä¸¥è€æ¹¿çš„æ–‡ç« .md', markdown);
  }
});
```

å¯ä»¥çœ‹åˆ°`markdown`æ–‡ä»¶å·²ç»å‡ºæ¥äº†ã€‚

![](./images/68166262c2b64eb88d92a039c574f0ff~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.webp)

æ–‡ä»¶å†…å®¹ä¹Ÿéƒ½è½¬æ¢æˆåŠŸäº†ï¼Œåªæ˜¯å›¾ç‰‡åœ°å€ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰å°†å›¾ç‰‡è¿›è¡Œä¿å­˜å’Œæ›¿æ¢ï¼Œæ¥ä¸‹æ¥ä¸€èµ·å¤„ç†ä¸‹ã€‚

![](./images/2199abbce6134060b3f7f58b45a72c44~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.webp)

### ä¸‹è½½æ–‡ç« å†…çš„å›¾ç‰‡

å¤§å®¶åº”è¯¥ä¹ŸçŒœåˆ°äº†ï¼Œå‰é¢æˆ‘ä»¬ä½¿ç”¨çš„ `$` ç”¨æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ª `find('img')`è¿™ä¸ªAPIè·å–æ‰€æœ‰çš„imgæ ‡ç­¾ç„¶åè¿›è¡Œéå†ï¼Œæ³¨æ„åœ¨è¿™ä½¿ç”¨çš„ `map` æ˜¯ `cheerio` æä¾›çš„ã€‚

```diff
request(url, (error, response, body) => {
  if (!error && response.statusCode === 200) {
    // è§£æDOMå…ƒç´ 
    const $ = cheerio.load(body);
    // è·å–æ–‡ç« å†…å®¹
    const content = $('.markdown-body').html();
+   const imageElements = $('.markdown-body').find('img');

+   imageElements.map((index, img) => {
+     console.log(img.attribs.src);
+   })
    // è½¬æ¢ä¸ºmarkdown
    const markdown = turndownService.turndown(content);
    // å†™å…¥æ–‡ä»¶
    fs.writeFileSync('./docs/ä¸¥è€æ¹¿çš„æ–‡ç« .md', markdown);
  }
});
```

å¯ä»¥çœ‹åˆ°å·²ç»éå†å‡ºæ‰€æœ‰å›¾ç‰‡çš„é“¾æ¥äº†ï¼Œæ¥ä¸‹æ¥å°±åªéœ€è¦ï¼Œå°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥å°±è¡Œäº†ã€‚

![](./images/fa47f389dd124cc3bd66deaa1cb07e3a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.webp)

#### ä¿å­˜å›¾ç‰‡

å…ˆé€šè¿‡`request`å‘èµ·ä¸€æ¬¡ `head` è¿™æ ·å¯ä»¥æ‹¿åˆ°è¯·æ±‚å¤´çš„ä¿¡æ¯ï¼Œè·å–æ‰©å±•åã€‚

> Tipsï¼š head è¯·æ±‚åªä¼šè¿”å›å“åº”å¤´çš„ä¿¡æ¯ã€‚ä¸å…¶ä»– HTTP è¯·æ±‚æœ‰æ‰€ä¸åŒã€‚

ä½¿ç”¨`path.basename`æ–¹æ³•ä»URLä¸­æå–æ–‡ä»¶åå¹¶ç»§ç»­é€šè¿‡`request`è¯·æ±‚è¿›è¡Œå›¾ç‰‡ä¸‹è½½ï¼Œç„¶åé€šè¿‡ `fs` æ¨¡å—è¿›è¡Œå†™å…¥æµå¹¶ä¿å­˜åˆ°æœ¬åœ°ã€‚

```js
const imageElements = $('.markdown-body').find('img');
// éå†å›¾ç‰‡å…ƒç´ 
imageElements.map((index, img) => {
  const imageUrl = img.attribs.src;
  request.head(imageUrl, (err, res, body) => {
    // è·å–æ–‡ä»¶æ‰©å±•å
    const contentType = res.headers['content-type'];
    const extname = contentType ? `.${contentType.split('/')[1]}` : '';
    // è·å–æ–‡ä»¶å
    const filename = path.basename(imageUrl);
    // åˆ›å»ºå†™å…¥æµ
    const stream = fs.createWriteStream(path.join(__dirname, 'docs/images', filename + extname));
    // ç®¡é“æµ
    request(imageUrl)
      .pipe(stream)
      .on('close', () => console.log('Image downloaded successfully.'));
  });
});
```

#### æ›¿æ¢å›¾ç‰‡è·¯å¾„

> ç°åœ¨æˆ‘ä»¬å·²ç»å°†æ–‡ç« å†…çš„æ‰€æœ‰å›¾ç‰‡éƒ½ä¿å­˜åˆ°æœ¬åœ°äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶æœªå°†`Markdown`é‡Œé¢çš„å›¾ç‰‡é“¾æ¥è¿›è¡Œæ›¿æ¢æˆæœ¬åœ°è·¯å¾„ï¼Œè¿™æ ·å¹¶æ²¡æœ‰è§£å†³æˆ‘çš„å®é™…é—®é¢˜ï¼Œäºæ˜¯æ¥ä¸‹æ¥å°†è¿›è¡Œæ›¿æ¢ã€‚

æˆ‘çš„æ€è·¯å¦‚ä¸‹ï¼Œåœ¨çœŸæ­£å†™å…¥ `Markdown` ä¹‹å‰å¿…é¡»å°†æ‰€æœ‰å›¾ç‰‡æ›¿æ¢ä¸‹è½½å®Œæˆã€‚æ‰èƒ½å¼€å§‹ï¼Œæ‰€ä»¥å¾—å°†ä¸‹è½½å’Œæ›¿æ¢æ”¾åœ¨ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…å…¨éƒ¨æ‰§è¡Œå®Œæ¯•ï¼Œæ‰èƒ½å†™å…¥ `Markdown` æ–‡ä»¶ï¼Œå¯èƒ½å·²ç»æœ‰åŒå­¦çŒœå‡ºæ¥äº†ï¼Œå¯ä»¥ä½¿ç”¨ `Promise.all` æ¥å®ç°æ­¤åŠŸèƒ½ã€‚

![](./images/cbb221e4ea9741c9abb826445244859e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.webp) å®ç°ä»£ç å¦‚ä¸‹

```js
// tasks å­˜æ”¾æ‰€æœ‰å›¾ç‰‡çš„ Promise
const tasks = imageElements.map((index, img) => {
  // æŠ›å‡º Promise
  return new Promise((resolve, reject) => {
    request.head(imageUrl, (err, res, body) => {
      // æ­¤å¤„çœç•¥éƒ¨åˆ†ä»£ç 
      request(imageUrl)
        .pipe(stream)
        .on('close', () => {
          // ä¿®æ”¹å…ƒç´ çš„ src å±æ€§
          $(img).attr('src', `./images/${filename + extname}`);
          // åœ¨ä¸‹è½½å®Œæˆå resolve
          resolve();
        });
    });
  });
});
// ç­‰å¾…å…¶ä¸‹è½½å®Œæˆ
await Promise.all(tasks)
// æ­¤å¤„çœç•¥å†™å…¥ markdown çš„ä»£ç 
```

å¯ä»¥çœ‹åˆ° `Markdown` æ–‡ä»¶å†…çš„æ‰€æœ‰å›¾ç‰‡éƒ½æ›¿æ¢äº†æœ¬åœ°çš„å›¾ç‰‡è·¯å¾„ã€‚

![](./images/7b4941d05a9b4caea45f4cd7aa57570c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.webp)

ä¼˜åŒ–+å®¹é”™
-----

> åˆ°è¿™é‡Œæˆ‘ä»¬çš„æ ¸å¿ƒéœ€æ±‚å°±ç®—è§£å†³äº†ï¼Œå½“ç„¶é‡Œé¢è¿˜æœ‰ä¸€äº›ç»†èŠ‚å’Œä¸€äº›å®¹é”™å¤„ç†ï¼Œå…¶å®è¿˜æ²¡å¤„ç†å®Œï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥æ¥ç€å¾€ä¸‹çœ‹ï¼Œå¦‚æœéœ€è¦æºç çš„åŒå­¦å¯ä»¥ç›´æ¥å» [github.com/CrazyMrYan/â€¦](https://github.com/CrazyMrYan/node-reptile "https://github.com/CrazyMrYan/node-reptile") è·å–æœ€æ–°çˆ¬è™«ä»£ç ï¼Œå–œæ¬¢å¯ä»¥å…ˆç‚¹ä¸ª `star`ã€‚

### å»æ‰çƒ¦äººä¸­é—´é¡µ

ä¼—æ‰€å‘¨çŸ¥ï¼Œæ˜é‡‘ï¼ˆçŸ¥ä¹ã€CSDNç­‰ç­‰ï¼‰æ‰€æœ‰çš„é“¾æ¥éƒ½åŠ ä¸Šäº†ä¸€ä¸ªçƒ¦äººçš„ä¸­é—´é¡µï¼Œæ¯æ¬¡ç‚¹å‡»è·³è½¬è¿˜æ¥ä¸ªæç¤ºã€‚åˆ°æ—¶å€™éƒ¨ç½²åˆ°è‡ªå·±åšå®¢ä¸Šå»ï¼Œç‚¹è¿™ä¸ªé“¾æ¥è¿˜ä¼šä¿ç•™ï¼Œé‚£å²‚ä¸æ˜¯æ¶å¿ƒè‡ªå·±ï¼Œæ¶å¿ƒåˆ«äººå—ï¼Ÿ

![](./images/54a55d01127c49db9536c890bf664d04~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.webp)

æ˜é‡‘ä¸Šè¢«è½¬æ¢çš„é“¾æ¥å¦‚ä¸‹

![](./images/900af397b1cf445a8037de9c094e72ff~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.webp)

```diff
- https://link.juejin.cn?target=
+ https%3A%2F%2Fgithub.com%2FCrazyMrYan%2Fchat-audio
```

æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ›¿æ¢æ‰æ‰€æœ‰é“¾æ¥ä¸Šçš„ `https://link.juejin.cn?target=`ã€‚

```js
const linkElements = $('.markdown-body').find('a');
linkElements?.map((index, link) => {
  const url = $(link).attr('href')?.replace('https://link.juejin.cn?target=', '');
  $(link).attr('href', decodeURIComponent(url));
})
```

è¢«æ›¿æ¢åçš„é“¾æ¥å°±å¯ä»¥æ­£å¸¸è·³è½¬äº†ã€‚

![](./images/cb6257c802634d0697d407f07d282338~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.webp)

### è§£å†³è¯­è¨€é«˜äº®ä¸¢å¤±çš„é—®é¢˜

å¯ä»¥çœ‹åˆ°ç›®å‰çš„ä»£ç è½¬æˆmarkdownä¹‹åï¼Œè¡¨ç¤ºä»£ç å—çš„ååº”å·éƒ½ä¸è§äº†ï¼Œå°±æ˜¯å°±æ˜¯ä»£ç ç•Œã€Šæ¶ˆå¤±çš„å®ƒï¼ˆ\`\*3ï¼‰ã€‹;

![](./images/41fa6bb9aaf74a1faf05ec686e0a53a7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.webp)

æ€ä¹ˆè§£å†³ï¼Ÿæˆ‘è¯•äº†æŒºå¤šæ¬¡è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™çš„ï¼Œä½†æ²¡æˆåŠŸï¼ŒåŠŸå¤«ä¸è´Ÿæœ‰å¿ƒäººï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªå¤§ä½¬å†™çš„ä½¿ç”¨ turndown çš„æ ¡éªŒè§„åˆ™ï¼Œæ‰€ä»¥å°±ç›´æ¥æ¬è¿è¿‡æ¥äº†ã€‚å¦‚æœä½ æœ‰æ›´å¥½çš„æ–¹æ¡ˆï¼Œå¯ä»¥ç•™è¨€ç§ä¿¡æˆ‘ï½

```js
// æ·»åŠ åä¸ºâ€œcodeâ€çš„è§„åˆ™
turndownService.addRule('code', {
  // è¿‡æ»¤éœ€è¦è½¬æ¢çš„HTMLèŠ‚ç‚¹
  filter (node, options) {
    // é€‰æ‹©nodeNameä¸ºâ€œPREâ€å¹¶ä¸”ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹çš„nodeNameä¸ºâ€œCODEâ€çš„èŠ‚ç‚¹
    return (
      node.nodeName === 'PRE' &&
      node.firstChild.nodeName === 'CODE'
    )
  },

  // æ›¿æ¢é€‰å®šçš„HTMLèŠ‚ç‚¹ï¼Œå°†å…¶è½¬æ¢ä¸ºMarkdownä»£ç å—
  replacement (content, node, options) {
    // å®šä¹‰ä¸€ä¸ªrepeatå‡½æ•°ï¼Œç”¨äºç”Ÿæˆé‡å¤å­—ç¬¦ä¸²
    const repeat = (str, times) => {
      return new Array(times + 1).join(str);
    }

    // è·å–ä»£ç å—çš„classå±æ€§å’Œè¯­è¨€ç±»å‹
    const className = node.firstChild.getAttribute('class') || '';
    const language = (className.match(/language-(\S+)/) || [null, ''])[1];
    const code = node.firstChild.textContent;

    // å®šä¹‰fenceå­—ç¬¦å’Œå¤§å°
    const fenceChar = options.fence.charAt(0);
    let fenceSize = 3;
    const fenceInCodeRegex = new RegExp('^' + fenceChar + '{3,}', 'gm');

    // è®¡ç®—fenceå¤§å°
    let match;
    while ((match = fenceInCodeRegex.exec(code))) {
      if (match[0].length >= fenceSize) {
        fenceSize = match[0].length + 1;
      }
    }

    // ç”Ÿæˆfenceå­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶åŒ…è£¹åœ¨ä»£ç å—å¤–
    const fence = repeat(fenceChar, fenceSize);

    return (
      '\n\n' + fence + language + '\n' +
      code.replace(/\n$/, '') +
      '\n' + fence + '\n\n'
    )
  }
});
```

æ„Ÿè°¢ CSDN`ç»ä¸åŸåˆ›çš„é£é¾™`å¤§ä½¬çš„ã€ŠTurndown æºç è§£æï¼šäºŒã€è§„åˆ™ã€‹ï¼Œæœç„¶ç«™åœ¨å¤§ä½¬çš„è‚©è†€ä¸Šï¼Œè§†é‡æ›´åŠ å¼€é˜”

![](./images/3137ed26752540279ca7589354a4cce4~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.webp)

### å»æ‰æ˜é‡‘mdæ ·å¼

å¯ä»¥çœ‹åˆ°æ˜é‡‘åœ¨æ–‡ç« å†…å®¹åŒºåŸŸæ”¾äº†ä¸ª style æ ‡ç­¾ã€‚ä½†é‡Œé¢çš„å†…å®¹å¹¶ä¸æ˜¯æˆ‘ä»¬éœ€è¦çš„ ![](./images/6251df26b243459c99e6e4f422243678~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.webp)

![](./images/a3cabdebb7dd4e9da21333b73d64f239~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.webp)

æœ‰äº†å‰é¢çš„ç»éªŒï¼Œç…§çŒ«ç”»è™åŠ ä¸ªæ ¡éªŒè§„åˆ™å°±è¡Œï¼Œæˆ‘ä»¬åªéœ€æ‰¾åˆ°`style`æ ‡ç­¾ç„¶åæŠŠå…ƒç´ çš„å†…å®¹æ¸…ç©ºä¸€ä¸‹ã€‚

```js
filter(node, options) {
  return node.nodeName === 'STYLE'
},

replacement(content, node, options) {
  return ''
}
```

è¿™æ ·å°±æ¸…ç©ºäº†å†…ç½®æ ·å¼ã€‚

![](./images/c97792c21b094be8a67aa2c0e44798f3~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.webp)

### è·å–æ–‡ç« æ ‡é¢˜ä½œä¸ºæ–‡ä»¶å

æˆ‘ä»¬ä¹‹å‰çš„æ–‡ä»¶æ ‡é¢˜éƒ½æ˜¯å›ºå®šçš„ï¼Œæˆ‘ä»¬éœ€è¦åŠ¨æ€è·å–ï¼Œæ€ä¹ˆå®ç°å‘¢ï¼Ÿ

å¾ˆç®€å•ç›´æ¥é€šè¿‡ title æ ‡ç­¾æ‹¿å°±è¡Œã€‚

```js
// å»æ‰æ˜é‡‘titleçš„æ ‡å¿—
const filename = $('title').text().replace(' - æ˜é‡‘', '')?.trim();

// å†™å…¥æ–‡ä»¶
fs.writeFileSync(`docs/${filename}.md`, markdown);
```

è¿™æ ·æ–‡ä»¶åå°±è°ƒæ•´å¥½äº†ã€‚

![](./images/a40af40e66b64340b8fede8c43075319~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.webp)

### å®¹é”™å¤„ç†

é»˜è®¤æ˜¯æ²¡æœ‰ docs æˆ–è€… images ç›®å½•çš„ï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦å­˜åœ¨ï¼Œæ²¡æœ‰åˆ™åˆ›å»ºä¸€ä¸ªç©ºç›®å½•ï¼Œæ”¾åœ¨ä»£ç è¿è¡Œä¹‹å‰å³å¯ã€‚

```js
// åˆ›å»ºç›®å½•
const docsDir = path.join(__dirname, 'docs');
const imagesDir = path.join(__dirname, 'docs/images');

if(!fs.existsSync(docsDir)) {
  fs.mkdirSync(docsDir);
}

if (!fs.existsSync(imagesDir)) {
  fs.mkdirSync(imagesDir);
}
```

æœ€å
--

å¤„ç†å¾—å·®ä¸å¤šäº†ï¼Œå…¶å®æˆ‘è¿˜æœ‰ä¸ªç—›ç‚¹éœ€æ±‚ï¼Œé€šè¿‡ç”¨æˆ·idï¼Œèƒ½å¤Ÿçˆ¬å–åˆ°å½“å‰ç”¨æˆ·æ˜é‡‘åœ¨æ˜é‡‘çš„æ‰€æœ‰æ–‡ç« ï¼Œè€Œä¸æ˜¯åƒæˆ‘ç°åœ¨ä¸€æ ·ä¸€ä¸ªä¸ªçš„å»å¤„ç†ã€‚åç»­æˆ‘ä¼šæŒç»­æ›´æ–°æ­¤ä»“åº“ç›´åˆ°è§£å†³äº†æˆ‘æ‰€æœ‰ç—›ç‚¹ã€‚

> è¿™ä¸ªæœ‰ç‚¹åƒNå¹´å‰æˆ‘ç¬¬ä¸€æ¬¡ç© `Wordpress` çš„é‚£ä¸ªçˆ¬å–åˆ«äººæ–‡ç« çš„æ’ä»¶ä¸€æ ·ã€‚ä½†æ˜¯è®°ä¸æ¸…æ’ä»¶åå­—äº†ï¼Œå¥½äº†ä»Šå¤©çš„çˆ¬è™«åˆ†äº«å…ˆåˆ°è¿™é‡Œå§ã€‚

ä»“åº“åœ°å€: [github.com/CrazyMrYan/â€¦](https://github.com/CrazyMrYan/node-reptile "https://github.com/CrazyMrYan/node-reptile")

å‚è€ƒæ–‡çŒ®
----

*   [blog.csdn.net/wizardforceâ€¦](https://blog.csdn.net/wizardforcel/article/details/130369650 "https://blog.csdn.net/wizardforcel/article/details/130369650")
*   [www.npmjs.com/package/cheâ€¦](https://www.npmjs.com/package/cheerio "https://www.npmjs.com/package/cheerio")
*   [www.npmjs.com/package/turâ€¦](https://www.npmjs.com/package/turndown "https://www.npmjs.com/package/turndown")
